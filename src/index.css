@tailwind base;
@tailwind components;
@tailwind utilities;

/* GitHub Advanced Toolkit Design System */

@layer base {
  :root {
    /* Light mode by default - GitHub-inspired color palette */
    --background: 220 13% 98%;
    --foreground: 220 13% 9%;
    
    /* Surface colors */
    --surface: 220 13% 96%;
    --surface-elevated: 220 13% 100%;
    --surface-highlight: 220 13% 93%;
    
    /* Cards and components */
    --card: 220 13% 100%;
    --card-foreground: 220 13% 9%;
    
    --popover: 220 13% 100%;
    --popover-foreground: 220 13% 9%;
    
    /* Primary - GitHub blue */
    --primary: 213 94% 68%;
    --primary-foreground: 220 13% 9%;
    
    /* Secondary surfaces */
    --secondary: 220 13% 96%;
    --secondary-foreground: 220 13% 9%;
    
    /* Muted elements */
    --muted: 220 13% 96%;
    --muted-foreground: 220 9% 45%;
    
    /* Accent colors */
    --accent: 220 13% 93%;
    --accent-foreground: 220 13% 9%;
    
    /* Destructive states */
    --destructive: 0 84% 60%;
    --destructive-foreground: 220 9% 98%;
    
    /* Borders and inputs */
    --border: 220 13% 88%;
    --input: 220 13% 100%;
    --ring: 213 94% 68%;

    --radius: 0.5rem;
    
    /* Success states */
    --success: 142 76% 36%;
    --success-foreground: 220 9% 98%;
    
    /* Warning states */
    --warning: 48 96% 53%;
    --warning-foreground: 220 13% 9%;
    
    /* GitHub specific colors */
    --github-orange: 27 100% 55%;
    --github-green: 142 73% 42%;
    
    /* Gradients */
    --gradient-primary: linear-gradient(135deg, hsl(213 94% 68%), hsl(213 94% 78%));
    --gradient-surface: linear-gradient(135deg, hsl(220 13% 96%), hsl(220 13% 100%));
    
    /* Animations */
    --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-fast: all 0.15s ease-out;
    
    /* View Transitions API Animation Timing Functions */
    --expo-out: linear(
      0 0%, 0.1684 2.66%, 0.3165 5.49%,
      0.446 8.52%, 0.5581 11.78%,
      0.6535 15.29%, 0.7341 19.11%,
      0.8011 23.3%, 0.8557 27.93%,
      0.8962 32.68%, 0.9283 38.01%,
      0.9529 44.08%, 0.9711 51.14%,
      0.9833 59.06%, 0.9915 68.74%, 1 100%
    );
    --expo-in: linear(
      0 0%, 0.0085 31.26%, 0.0167 40.94%,
      0.0289 48.86%, 0.0471 55.92%,
      0.0717 61.99%, 0.1038 67.32%,
      0.1443 72.07%, 0.1989 76.7%,
      0.2659 80.89%, 0.3465 84.71%,
      0.4419 88.22%, 0.554 91.48%,
      0.6835 94.51%, 0.8316 97.34%, 1 100%
    );
  }

  .dark {
    /* Dark mode overrides */
    --background: 220 13% 9%;
    --foreground: 220 9% 98%;
    
    /* Surface colors */
    --surface: 220 13% 12%;
    --surface-elevated: 220 13% 16%;
    --surface-highlight: 220 13% 20%;
    
    --card: 220 13% 12%;
    --card-foreground: 220 9% 98%;
    
    --popover: 220 13% 16%;
    --popover-foreground: 220 9% 98%;
    
    --secondary: 220 13% 16%;
    --secondary-foreground: 220 9% 98%;
    
    --muted: 220 13% 16%;
    --muted-foreground: 220 9% 65%;
    
    --accent: 220 13% 20%;
    --accent-foreground: 220 9% 98%;
    
    --border: 220 13% 24%;
    --input: 220 13% 16%;
    
    /* Dark mode gradients */
    --gradient-surface: linear-gradient(135deg, hsl(220 13% 12%), hsl(220 13% 16%));
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }
}

/* View Transitions API Theme Toggle Animations */
::view-transition-group(root) {
  animation-timing-function: var(--expo-out);
}

::view-transition-new(root) {
  mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><defs><filter id="blur"><feGaussianBlur stdDeviation="2"/></filter></defs><circle cx="20" cy="20" r="18" fill="white" filter="url(%23blur)"/></svg>') center / 0 no-repeat;
  animation: theme-scale 1s;
}

::view-transition-old(root),
.dark::view-transition-old(root) {
  animation: none;
  z-index: -1;
}

.dark::view-transition-new(root) {
  animation: theme-scale 1s;
}

@keyframes theme-scale {
  to {
    mask-size: 200vmax;
  }
}

/* Custom Theme Toggle Styles */
.theme-toggle-container {
  position: relative;
  display: inline-block;
  width: 80px;
  height: 34px;
  transform: scale(0.8);
}

.theme-toggle-input {
  opacity: 0;
  width: 0;
  height: 0;
}

.theme-toggle-slider {
  position: absolute;
  cursor: pointer;
  inset: 0;
  background: linear-gradient(to bottom, hsl(var(--primary) / 0.8), hsl(var(--primary)));
  box-shadow: inset 0 0 3px hsl(var(--border));
  transition: 0.4s;
  filter: drop-shadow(0 0 2px hsl(var(--border)));
  overflow: hidden;
  z-index: 1;
}

.theme-toggle-slider::before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: hsl(var(--warning));
  transition: 0.4s;
  box-shadow:
    inset 0 -1px 2px hsl(var(--warning) / 0.8),
    0 1px 2px hsl(var(--muted) / 0.5),
    0 0 0 10px hsl(var(--background) / 0.1),
    0 0 0 20px hsl(var(--background) / 0.1),
    10px 0 0 20px hsl(var(--background) / 0.1);
}

.theme-toggle-input:checked + .theme-toggle-slider {
  background: linear-gradient(-45deg, hsl(var(--muted)), hsl(var(--muted-foreground) / 0.3));
  filter: drop-shadow(0 0 2px hsl(var(--foreground) / 0.3));
}

.theme-toggle-input:checked + .theme-toggle-slider:before {
  background: hsl(var(--muted-foreground));
  transform: translateX(180%);
  box-shadow:
    inset 0 -1px 2px hsl(var(--muted-foreground) / 0.6),
    0 1px 2px hsl(var(--border)),
    0 0 0 10px hsl(var(--background) / 0.1),
    0 0 0 20px hsl(var(--background) / 0.1),
    -10px 0 0 20px hsl(var(--background) / 0.1);
}

.theme-toggle-slider::after {
  content: "";
  position: absolute;
  background: hsl(var(--muted));
  width: 4px;
  height: 4px;
  border-radius: 50%;
  bottom: 65%;
  right: 16%;
  box-shadow:
    -8px 7px 0 3px hsl(var(--muted)),
    2px 10px 0 hsl(var(--muted));
  transition: .4s;
  transform: scale(0) rotate(360deg);
  filter: saturate(.75);
}

.theme-toggle-input:checked + .theme-toggle-slider::after {
  transform: scale(1) rotate(-24deg);
}

.theme-toggle-input:checked + .theme-toggle-slider .theme-toggle-background {
  transform: translateY(260%);
  opacity: 0;
}

.theme-toggle-star {
  transform: scale(0);
  transition: .4s;
}

.theme-toggle-input:checked + .theme-toggle-slider .theme-toggle-star {
  position: absolute;
  width: 0;
  height: 0;
  border: 10px solid transparent;
  border-bottom: 7px solid hsl(var(--background));
  transform: rotate(35deg);
  border-top: none;
  margin: 5px 0;
  transform: scale(.3) translate(50%);
}

.theme-toggle-input:checked + .theme-toggle-slider .theme-toggle-star:last-child {
  transform: scale(.4) translate(225%, 300%);
}

.theme-toggle-input:checked + .theme-toggle-slider .theme-toggle-star::before,
.theme-toggle-input:checked + .theme-toggle-slider .theme-toggle-star::after {
  content: "";
  position: absolute;
  width: 0;
  height: 0;
  border-top: none;
}

.theme-toggle-input:checked + .theme-toggle-slider .theme-toggle-star::before {
  border: 3px solid transparent;
  border-bottom: 8px solid hsl(var(--background));
  transform: rotate(35deg);
  top: -7.5px;
  left: 1.5px;
}

.theme-toggle-input:checked + .theme-toggle-slider .theme-toggle-star::after {
  border: 10px solid transparent;
  border-bottom: 7px solid hsl(var(--background));
  transform: rotate(70deg);
  top: -7px;
  left: -4.5px;
}

.theme-toggle-slider.round {
  border-radius: 34px;
}

.theme-toggle-slider.round:before {
  border-radius: 50%;
}

.theme-toggle-background {
  position: absolute;
  width: 10px;
  height: 10px;
  background: hsl(var(--background));
  border-radius: 50%;
  bottom: 0;
  right: 0;
  box-shadow:
    0 -10px 0 8px hsl(var(--background)),
    -10px 0px 0 8px hsl(var(--background)),
    -45px 4px 0 5px hsl(var(--background)),
    -60px 0px 0 3px hsl(var(--background)),
    -29px 2px 0 8px hsl(var(--background));
  transition: .4s;
}