// @license Â© 2019 Google LLC. Licensed under the Apache License, Version 2.0.
const u=document;let p={};try{p=localStorage}catch{}const m="prefers-color-scheme",h="media",i="light",r="dark",g="system",S=`(${m}:${r})`,W=`(${m}:${i})`,x="link[rel=stylesheet]",C="style",f="remember",y="legend",k="toggle",q="switch",R="three-way",v="appearance",L="permanent",$="mode",n="colorschemechange",c="permanentcolorscheme",E="all",T="not all",t="dark-mode-toggle",d="https://googlechromelabs.github.io/dark-mode-toggle/demo/",l=(b,e,s=e)=>{Object.defineProperty(b,s,{enumerable:!0,get(){const a=this.getAttribute(e);return a===null?"":a},set(a){this.setAttribute(e,a)}})},j=(b,e,s=e)=>{Object.defineProperty(b,s,{enumerable:!0,get(){return this.hasAttribute(e)},set(a){a?this.setAttribute(e,""):this.removeAttribute(e)}})},w=u.createElement("template");w.innerHTML=`<style>*,::after,::before{box-sizing:border-box}:host{contain:content;display:block}:host([hidden]){display:none}form{background-color:var(--${t}-background-color,transparent);color:var(--${t}-color,inherit);padding:0}fieldset{border:none;margin:0;padding-block:.25rem;padding-inline:.25rem}legend{font:var(--${t}-legend-font,inherit);padding:0}input,label{cursor:pointer}label{white-space:nowrap}input{opacity:0;position:absolute;pointer-events:none}input:focus-visible+label{outline:#e59700 auto 2px;outline:-webkit-focus-ring-color auto 5px}label::before{content:"";display:inline-block;background-size:var(--${t}-icon-size,1rem);background-repeat:no-repeat;height:var(--${t}-icon-size,1rem);width:var(--${t}-icon-size,1rem);vertical-align:middle}label:not(:empty)::before{margin-inline-end:.5rem}[part=lightLabel]::before,[part=lightThreeWayLabel]::before{background-image:var(--${t}-light-icon, url("${d}sun.png"))}[part=darkLabel]::before,[part=darkThreeWayLabel]::before{filter:var(--${t}-icon-filter, none);background-image:var(--${t}-dark-icon, url("${d}moon.png"))}[part=systemThreeWayLabel]::before{background-image:var(--${t}-system-icon, url("${d}system.png"))}[part=toggleLabel]::before{background-image:var(--${t}-checkbox-icon,none)}[part=permanentLabel]::before{background-image:var(--${t}-remember-icon-unchecked, url("${d}unchecked.svg"))}[part$=ThreeWayLabel],[part=darkLabel],[part=lightLabel],[part=toggleLabel]{font:var(--${t}-label-font,inherit)}[part$=ThreeWayLabel]:empty,[part=darkLabel]:empty,[part=lightLabel]:empty,[part=toggleLabel]:empty{font-size:0;padding:0}[part=permanentLabel]{font:var(--${t}-remember-font,inherit)}input:checked+[part=permanentLabel]::before{background-image:var(--${t}-remember-icon-checked, url("${d}checked.svg"))}input:checked+[part$=ThreeWayLabel],input:checked+[part=darkLabel],input:checked+[part=lightLabel]{background-color:var(--${t}-active-mode-background-color,transparent)}input:checked+[part$=ThreeWayLabel]::before,input:checked+[part=darkLabel]::before,input:checked+[part=lightLabel]::before{background-color:var(--${t}-active-mode-background-color,transparent)}input:checked+[part=toggleLabel]::before,input[part=toggleCheckbox]:checked~[part=threeWayRadioWrapper] [part$=ThreeWayLabel]::before{filter:var(--${t}-icon-filter, none)}input:checked+[part=toggleLabel]~aside [part=permanentLabel]::before{filter:var(--${t}-remember-filter, invert(100%))}aside{visibility:hidden;margin-block-start:.15rem}[part=darkLabel]:focus-visible~aside,[part=lightLabel]:focus-visible~aside,[part=toggleLabel]:focus-visible~aside{visibility:visible;transition:visibility 0s}aside [part=permanentLabel]:empty{display:none}@media (hover:hover){aside{transition:visibility 3s}aside:hover{visibility:visible}[part=darkLabel]:hover~aside,[part=lightLabel]:hover~aside,[part=toggleLabel]:hover~aside{visibility:visible;transition:visibility 0s}}</style><form part=form><fieldset part=fieldset><legend part=legend></legend><input id=l part=lightRadio type=radio name=mode> <label for=l part=lightLabel></label> <input id=d part=darkRadio type=radio name=mode> <label for=d part=darkLabel></label> <input id=t part=toggleCheckbox type=checkbox> <label for=t part=toggleLabel></label> <span part=threeWayRadioWrapper><input id=3l part=lightThreeWayRadio type=radio name=three-way-mode> <label for=3l part=lightThreeWayLabel></label> <input id=3s part=systemThreeWayRadio type=radio name=three-way-mode> <label for=3s part=systemThreeWayLabel></label> <input id=3d part=darkThreeWayRadio type=radio name=three-way-mode> <label for=3d part=darkThreeWayLabel></label></span><aside part=aside><input id=p part=permanentCheckbox type=checkbox> <label for=p part=permanentLabel></label></aside></fieldset></form>`;class M extends HTMLElement{static get observedAttributes(){return[$,v,L,y,i,r,f]}constructor(){super(),l(this,$),l(this,v),l(this,y),l(this,i),l(this,r),l(this,g),l(this,f),j(this,L),this.t=null,this.i=null,u.addEventListener(n,e=>{this.mode=e.detail.colorScheme,this.h(),this.o(),this.l()}),u.addEventListener(c,e=>{this.permanent=e.detail.permanent,this.p.checked=this.permanent,this.l()}),this.m()}m(){const e=this.attachShadow({mode:"open"});e.append(w.content.cloneNode(!0)),this.t=u.querySelectorAll(`${x}[${h}*=${m}][${h}*="${r}"],
       ${C}[${h}*=${m}][${h}*="${r}"]`),this.i=u.querySelectorAll(`${x}[${h}*=${m}][${h}*="${i}"], 
       ${C}[${h}*=${m}][${h}*="${i}"]`),this.u=e.querySelector("[part=lightRadio]"),this.k=e.querySelector("[part=lightLabel]"),this.$=e.querySelector("[part=darkRadio]"),this.v=e.querySelector("[part=darkLabel]"),this.L=e.querySelector("[part=toggleCheckbox]"),this.T=e.querySelector("[part=toggleLabel]"),this.W=e.querySelector("[part=lightThreeWayRadio]"),this.R=e.querySelector("[part=lightThreeWayLabel]"),this.C=e.querySelector("[part=systemThreeWayRadio]"),this.M=e.querySelector("[part=systemThreeWayLabel]"),this.S=e.querySelector("[part=darkThreeWayRadio]"),this._=e.querySelector("[part=darkThreeWayLabel]"),this.A=e.querySelector("legend"),this.D=e.querySelector("aside"),this.p=e.querySelector("[part=permanentCheckbox]"),this.O=e.querySelector("[part=permanentLabel]")}connectedCallback(){const e=matchMedia(S).media!==T;e&&matchMedia(S).addListener(({matches:a})=>{this.permanent||(this.mode=a?r:i,this.j(n,{colorScheme:this.mode}))});let s=!1;try{s=p.getItem(t)}catch{}if(s&&[r,i].includes(s)?(this.mode=s,this.p.checked=!0,this.permanent=!0):e&&(this.mode=matchMedia(W).matches?i:r),this.mode||(this.mode=i),this.permanent&&!s)try{p.setItem(t,this.mode)}catch{}this.appearance||(this.appearance=k),this.P(),this.h(),this.o(),this.l(),[this.u,this.$].forEach(a=>{a.addEventListener("change",()=>{this.mode=this.u.checked?i:r,this.o(),this.l(),this.j(n,{colorScheme:this.mode})})}),this.L.addEventListener("change",()=>{this.mode=this.L.checked?r:i,this.h(),this.l(),this.j(n,{colorScheme:this.mode})}),this.W.addEventListener("change",()=>{this.mode=i,this.permanent=!0,this.o(),this.h(),this.l(),this.j(n,{colorScheme:this.mode}),this.j(c,{permanent:this.permanent})}),this.S.addEventListener("change",()=>{this.mode=r,this.permanent=!0,this.o(),this.h(),this.l(),this.j(n,{colorScheme:this.mode}),this.j(c,{permanent:this.permanent})}),this.C.addEventListener("change",()=>{this.mode=this.H(),this.permanent=!1,this.o(),this.h(),this.l(),this.j(n,{colorScheme:this.mode}),this.j(c,{permanent:this.permanent})}),this.p.addEventListener("change",()=>{this.permanent=this.p.checked,this.l(),this.j(c,{permanent:this.permanent})}),this.q(),this.j(n,{colorScheme:this.mode}),this.j(c,{permanent:this.permanent})}attributeChangedCallback(e,s,a){if(e===$){const o=[i,g,r];if(!o.includes(a))throw new RangeError(`Allowed values are: "${o.join('", "')}".`);if(matchMedia("(hover:none)").matches&&this.remember&&this.B(),this.permanent)try{p.setItem(t,this.mode)}catch{}this.h(),this.o(),this.l(),this.q()}else if(e===v){const o=[k,q,R];if(!o.includes(a))throw new RangeError(`Allowed values are: "${o.join('", "')}".`);this.P()}else if(e===L){if(this.permanent){if(this.mode)try{p.setItem(t,this.mode)}catch{}}else try{p.removeItem(t)}catch{}this.p.checked=this.permanent}else e===y?this.A.textContent=a:e===f?this.O.textContent=a:e===i?(this.k.textContent=a,this.mode===i&&(this.T.textContent=a)):e===r&&(this.v.textContent=a,this.mode===r&&(this.T.textContent=a))}H(){return matchMedia(W).matches?i:r}j(e,s){this.dispatchEvent(new CustomEvent(e,{bubbles:!0,composed:!0,detail:s}))}P(){switch(this.u.hidden=this.k.hidden=this.$.hidden=this.v.hidden=this.L.hidden=this.T.hidden=this.W.hidden=this.R.hidden=this.C.hidden=this.M.hidden=this.S.hidden=this._.hidden=!0,this.appearance){case q:this.u.hidden=this.k.hidden=this.$.hidden=this.v.hidden=!1;break;case R:this.W.hidden=this.R.hidden=this.C.hidden=this.M.hidden=this.S.hidden=this._.hidden=!1;break;case k:default:this.L.hidden=this.T.hidden=!1;break}}h(){this.mode===i?this.u.checked=!0:this.$.checked=!0}o(){this.mode===i?(this.T.style.setProperty(`--${t}-checkbox-icon`,`var(--${t}-light-icon,url("${d}moon.png"))`),this.T.textContent=this.light,this.light||(this.T.ariaLabel=r),this.L.checked=!1):(this.T.style.setProperty(`--${t}-checkbox-icon`,`var(--${t}-dark-icon,url("${d}sun.png"))`),this.T.textContent=this.dark,this.dark||(this.T.ariaLabel=i),this.L.checked=!0)}l(){this.R.ariaLabel=i,this.M.ariaLabel=g,this.R.ariaLabel=r,this.R.textContent=this.light,this.M.textContent=this.system,this._.textContent=this.dark,this.permanent?this.mode===i?this.W.checked=!0:this.S.checked=!0:this.C.checked=!0}q(){this.mode===i?(this.i.forEach(e=>{e.media=E,e.disabled=!1}),this.t.forEach(e=>{e.media=T,e.disabled=!0})):(this.t.forEach(e=>{e.media=E,e.disabled=!1}),this.i.forEach(e=>{e.media=T,e.disabled=!0}))}B(){this.D.style.visibility="visible",setTimeout(()=>{this.D.style.visibility="hidden"},3e3)}}customElements.define(t,M);export{M as DarkModeToggle};
